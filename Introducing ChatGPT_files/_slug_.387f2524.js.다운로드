import{_ as j}from"./Footer.2eee9128.js";import{_ as q}from"./HeroMeta.7dd15925.js";import{u as E,_ as G}from"./Blocks.4ade62b4.js";import{_ as M}from"./List.e5b02f5f.js";import{_ as O,a as S}from"./ResearchPublications.31f10294.js";import{s as z,u as J,_ as K}from"./useHeadSeo.368e82b5.js";import{h as F,B as Q,f as U,w as W,g as X,o as _,i as h,j as Y,d as e,a as d,m as Z,p as tt,k}from"./entry.4b5ca0c5.js";import{b as et}from"./usePageTransition.fa4dc7ba.js";import{u as A}from"./usePreviewToken.c5c59d34.js";import{u as ot}from"./useErrorPage.88194d13.js";import"./BlockMath.vue.80899781.js";import"./Listing.39910ae4.js";import"./useResourceIndexData.6a8855de.js";import"./usePageLoading.292c5f65.js";import"./lang.4a9029fb.js";function it(t){var m,r,c,f,o,g,i,p;const{$helpers:a}=F(),l=(m=t.tags)==null?void 0:m.map(n=>({text:n.title,url:a.route(n,{context:"blog-details"})})),s={assetType:(r=t.hero)==null?void 0:r.assetType,intro:t.descriptionHtml,introRichText:t.descriptionRichText,links:a.heroLinks(t),title:((c=t.hero)==null?void 0:c.title)??t.title};return t.hero.assetType==="image"&&(s.image=((f=t.media.heroImage)==null?void 0:f.length)&&t.media.heroImage[0]["full-width"]),t.hero.assetType==="image-small"&&(s.image=((o=t.media.heroImage)==null?void 0:o.length)&&t.media.heroImage[0]["half-width"]),{authors:(g=t.authors)==null?void 0:g.map(n=>({fullname:n.fullname,description:n.description,image:a.media.imageByRole(n,"cover","default"),link:{text:"View all articles",url:a.route(n,{context:Q})}})),acknowledgments:t.acknowledgments,blocks:(i=t.blocks)==null?void 0:i.default,colorTheme:t.colorTheme,description:t.descriptionHtml,descriptionRichText:t.descriptionRichText,hero:s,meta:{authors:(p=t.authors)==null?void 0:p.map(n=>({name:n.fullname})),date:t.publicationDateFormatted,links:t.researchPublicationLinks,tags:l},publicationDate:t.publicationDate,publicationDateFormatted:t.publicationDateFormatted,seo:t.seo,title:t.title,tags:l,citations:[...t.footnotes,...t.references]}}const Tt={__name:"[slug]",async setup(t){var p,n;let a,l;const{$twill:s}=F(),m=U(),{footnotes:r,references:c,setCitations:f}=E(),{data:o,error:g}=([a,l]=W(()=>et(`blog-detail-${m.params.slug}`,()=>{const u=s.find("blog-details").filter({slug:m.params.slug});return A().value&&u.query("preview",A().value),u.fetch()},{transform:u=>s.transform(u).pop()})),a=await a,l(),a);ot({data:o,error:g});const i=it(o==null?void 0:o.value);return X(()=>{z(o==null?void 0:o.value)}),f(i.citations),J({title:(p=o==null?void 0:o.value)==null?void 0:p.title,seo:(n=o==null?void 0:o.value)==null?void 0:n.seo}),(u,nt)=>{const H=j,I=q,L=G,y=M,T=O,N=S,V=K;return _(),h(V,{id:`${e(o).type}-${e(o).slug}`},{default:Y(()=>{var b,x,w,R,v,D,B,$,C;return[d(H,{name:"BlogDetail",image:(b=e(i))==null?void 0:b.hero.image,intro:(x=e(i))==null?void 0:x.hero.intro,introRichText:(w=e(i))==null?void 0:w.hero.introRichText,links:(R=e(i))==null?void 0:R.hero.links,template:(v=e(i))==null?void 0:v.hero.assetType,title:(D=e(i))==null?void 0:D.hero.title,theme:(B=e(i))==null?void 0:B.colorTheme},null,8,["image","intro","introRichText","links","template","title","theme"]),d(I,Z(tt(($=e(i))==null?void 0:$.meta)),null,16),d(L,{blocks:(C=e(i))==null?void 0:C.blocks,modifier:"secondary"},null,8,["blocks"]),e(r).length?(_(),h(y,{key:0,title:"Footnotes",list:e(r),counterType:"alphabet",listType:"footnotes"},null,8,["list"])):k("",!0),e(c).length?(_(),h(y,{key:1,title:"References",list:e(c),listType:"references"},null,8,["list"])):k("",!0),e(i).authors&&e(i).authors.length?(_(),h(T,{key:2,title:"Authors",authors:e(i).authors},null,8,["authors"])):k("",!0),Object.values(e(i).acknowledgments).every(P=>P===null||P==="")?k("",!0):(_(),h(T,{key:3,title:"Acknowledgments",content:e(i).acknowledgments},null,8,["content"])),d(N,{topics:e(o).topics},null,8,["topics"])]}),_:1},8,["id"])}}};export{Tt as default};
